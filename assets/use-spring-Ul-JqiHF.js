import{r as p}from"./index-UB67W--D.js";import{u as M,i as l,M as h}from"./proxy-DOWuyJr3.js";import{u as V,a as x}from"./use-combine-values-CczNXetC.js";import{a as f,i as J,f as E,J as F,m as I}from"./JSAnimation-DcfD0aQm.js";function N(t){f.current=[],t();const n=V(f.current,t);return f.current=void 0,n}function k(...t){const n=!Array.isArray(t[0]),o=n?0:-1,r=t[0+o],e=t[1+o],s=t[2+o],a=t[3+o],i=J(e,s,a);return n?i(r):i}function w(t,n,o,r){if(typeof t=="function")return N(t);const e=typeof n=="function"?n:k(n,o,r);return Array.isArray(t)?g(t,e):g([t],([s])=>e(s))}function g(t,n){const o=M(()=>[]);return V(t,()=>{o.length=0;const r=t.length;for(let e=0;e<r;e++)o[e]=t[e].get();return n(o)})}function j(t,n){const o=l(t)?t.get():t,r=I(o);return A(r,t,n),r}function A(t,n,o){const r=t.get();let e=null,s=r,a;const i=typeof r=="string"?r.replace(/[\d.-]/g,""):void 0,m=()=>{e&&(e.stop(),e=null)},S=()=>{m(),e=new F({keyframes:[d(t.get()),d(s)],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...o,onUpdate:a})};t.attach((c,b)=>(s=c,a=C=>b(y(C,i)),E.postRender(S),t.get()),m);let u;return l(n)&&(u=n.on("change",c=>t.set(y(c,i))),t.on("destroy",u)),u}function y(t,n){return n?t+n:t}function d(t){return typeof t=="number"?t:parseFloat(t)}function q(t,n={}){const{isStatic:o}=p.useContext(h),r=()=>l(t)?t.get():t;if(o)return w(r);const e=x(r());return p.useInsertionEffect(()=>A(e,t,n),[e,JSON.stringify(n)]),e}export{w as a,A as b,j as s,k as t,q as u};
