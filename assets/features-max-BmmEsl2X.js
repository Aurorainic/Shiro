import{i as Ot,r as Ut,a as Ms,b as Nt,c as Ie,g as Bs,d as js,K as Fe,p as ks,e as Gt,f as ct,h as Is,j as Fs}from"./visual-element-CgLK1uo0.js";import{u as T,v as D,f as V,w as Oe,c as F,s as Os,j as Us,x as Vt,n as H,p as W,m as q,y as Ue,z as Ne,t as bt,A as Ns,S as Ge,B as ht,d as ft,C,D as Gs,E as Ks}from"./JSAnimation-DcfD0aQm.js";import{k as Ke,v as He,l as We,q as $e,g as ze,w as et,h as Z,p as Rt,x as Hs,L as Ws,S as $s,y as zs,z as Xe,i as M,B as Xs,C as dt,D as Kt,s as U,d as Ys,E as _s,n as qs,F as Zs,G as Js,H as Qs,I as ti,J as ei,K as si,t as Lt,r as ii,j as Ye,N as ni,O as oi,P as ri,Q as _e,R as ai,T as li,U as ui,V as ci}from"./proxy-DOWuyJr3.js";import{r as ot,j as hi,k as Ht}from"./index-UB67W--D.js";function qe(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let i=0;i<s;i++)if(t[i]!==e[i])return!1;return!0}const fi=He.length;function Ze(e){if(!e)return;if(!e.isControllingVariants){const s=e.parent?Ze(e.parent)||{}:{};return e.props.initial!==void 0&&(s.initial=e.props.initial),s}const t={};for(let s=0;s<fi;s++){const i=He[s],n=e.props[i];(Ke(n)||n===!1)&&(t[i]=n)}return t}const di=[...$e].reverse(),pi=$e.length;function mi(e){return t=>Promise.all(t.map(({animation:s,options:i})=>Ms(e,s,i)))}function gi(e){let t=mi(e),s=Wt(),i=!0;const n=a=>(l,c)=>{const h=Ut(e,c,a==="exit"?e.presenceContext?.custom:void 0);if(h){const{transition:f,transitionEnd:d,...m}=h;l={...l,...m,...d}}return l};function u(a){t=a(e)}function o(a){const{props:l}=e,c=Ze(e.parent)||{},h=[],f=new Set;let d={},m=1/0;for(let y=0;y<pi;y++){const p=di[y],v=s[p],g=l[p]!==void 0?l[p]:c[p],O=Ke(g),R=p===a?v.isActive:null;R===!1&&(m=y);let tt=g===c[p]&&g!==l[p]&&O;if(tt&&i&&e.manuallyAnimateOnMount&&(tt=!1),v.protectedKeys={...d},!v.isActive&&R===null||!g&&!v.prevProp||We(g)||typeof g=="boolean")continue;const Bt=yi(v.prevProp,g);let at=Bt||p===a&&v.isActive&&!tt&&O||y>m&&O,jt=!1;const kt=Array.isArray(g)?g:[g];let $=kt.reduce(n(p),{});R===!1&&($={});const{prevResolvedValues:It={}}=v,Ls={...It,...$},Ft=S=>{at=!0,f.has(S)&&(jt=!0,f.delete(S)),v.needsAnimating[S]=!0;const L=e.getValue(S);L&&(L.liveStyle=!1)};for(const S in Ls){const L=$[S],lt=It[S];if(d.hasOwnProperty(S))continue;let ut=!1;Ot(L)&&Ot(lt)?ut=!qe(L,lt):ut=L!==lt,ut?L!=null?Ft(S):f.add(S):L!==void 0&&f.has(S)?Ft(S):v.protectedKeys[S]=!0}v.prevProp=g,v.prevResolvedValues=$,v.isActive&&(d={...d,...$}),i&&e.blockInitialAnimation&&(at=!1),at&&(!(tt&&Bt)||jt)&&h.push(...kt.map(S=>({animation:S,options:{type:p}})))}if(f.size){const y={};if(typeof l.initial!="boolean"){const p=Ut(e,Array.isArray(l.initial)?l.initial[0]:l.initial);p&&p.transition&&(y.transition=p.transition)}f.forEach(p=>{const v=e.getBaseTarget(p),g=e.getValue(p);g&&(g.liveStyle=!0),y[p]=v??null}),h.push({animation:y})}let x=!!h.length;return i&&(l.initial===!1||l.initial===l.animate)&&!e.manuallyAnimateOnMount&&(x=!1),i=!1,x?t(h):Promise.resolve()}function r(a,l){if(s[a].isActive===l)return Promise.resolve();e.variantChildren?.forEach(h=>h.animationState?.setActive(a,l)),s[a].isActive=l;const c=o(a);for(const h in s)s[h].protectedKeys={};return c}return{animateChanges:o,setActive:r,setAnimateFunction:u,getState:()=>s,reset:()=>{s=Wt(),i=!0}}}function yi(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!qe(t,e):!1}function j(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Wt(){return{animate:j(!0),whileInView:j(),whileHover:j(),whileTap:j(),whileDrag:j(),whileFocus:j(),exit:j()}}class B{constructor(t){this.isMounted=!1,this.node=t}update(){}}class vi extends B{constructor(t){super(t),t.animationState||(t.animationState=gi(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();We(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let xi=0;class Pi extends B{constructor(){super(...arguments),this.id=xi++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const n=this.node.animationState.setActive("exit",!t);s&&!t&&n.then(()=>{s(this.id)})}mount(){const{register:t,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Ti={animation:{Feature:vi},exit:{Feature:Pi}};function J(e,t,s,i={passive:!0}){return e.addEventListener(t,s,i),()=>e.removeEventListener(t,s)}const Mt=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Q(e){return{point:{x:e.pageX,y:e.pageY}}}const Vi=e=>t=>Mt(t)&&e(t,Q(t));function X(e,t,s,i){return J(e,t,Vi(s),i)}function Je({top:e,left:t,right:s,bottom:i}){return{x:{min:t,max:s},y:{min:e,max:i}}}function Si({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Ai(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:i.y,right:i.x}}const Qe=1e-4,Di=1-Qe,wi=1+Qe,ts=.01,Ei=0-ts,Ci=0+ts;function A(e){return e.max-e.min}function bi(e,t,s){return Math.abs(e-t)<=s}function $t(e,t,s,i=.5){e.origin=i,e.originPoint=T(t.min,t.max,e.origin),e.scale=A(s)/A(t),e.translate=T(s.min,s.max,e.origin)-e.originPoint,(e.scale>=Di&&e.scale<=wi||isNaN(e.scale))&&(e.scale=1),(e.translate>=Ei&&e.translate<=Ci||isNaN(e.translate))&&(e.translate=0)}function Y(e,t,s,i){$t(e.x,t.x,s.x,i?i.originX:void 0),$t(e.y,t.y,s.y,i?i.originY:void 0)}function zt(e,t,s){e.min=s.min+t.min,e.max=e.min+A(t)}function Ri(e,t,s){zt(e.x,t.x,s.x),zt(e.y,t.y,s.y)}function Xt(e,t,s){e.min=t.min-s.min,e.max=e.min+A(t)}function _(e,t,s){Xt(e.x,t.x,s.x),Xt(e.y,t.y,s.y)}const Yt=()=>({translate:0,scale:1,origin:0,originPoint:0}),N=()=>({x:Yt(),y:Yt()}),_t=()=>({min:0,max:0}),P=()=>({x:_t(),y:_t()});function E(e){return[e("x"),e("y")]}function pt(e){return e===void 0||e===1}function St({scale:e,scaleX:t,scaleY:s}){return!pt(e)||!pt(t)||!pt(s)}function k(e){return St(e)||es(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function es(e){return qt(e.x)||qt(e.y)}function qt(e){return e&&e!=="0%"}function rt(e,t,s){const i=e-s,n=t*i;return s+n}function Zt(e,t,s,i,n){return n!==void 0&&(e=rt(e,n,i)),rt(e,s,i)+t}function At(e,t=0,s=1,i,n){e.min=Zt(e.min,t,s,i,n),e.max=Zt(e.max,t,s,i,n)}function ss(e,{x:t,y:s}){At(e.x,t.translate,t.scale,t.originPoint),At(e.y,s.translate,s.scale,s.originPoint)}const Jt=.999999999999,Qt=1.0000000000001;function Li(e,t,s,i=!1){const n=s.length;if(!n)return;t.x=t.y=1;let u,o;for(let r=0;r<n;r++){u=s[r],o=u.projectionDelta;const{visualElement:a}=u.options;a&&a.props.style&&a.props.style.display==="contents"||(i&&u.options.layoutScroll&&u.scroll&&u!==u.root&&K(e,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,ss(e,o)),i&&k(u.latestValues)&&K(e,u.latestValues))}t.x<Qt&&t.x>Jt&&(t.x=1),t.y<Qt&&t.y>Jt&&(t.y=1)}function G(e,t){e.min=e.min+t,e.max=e.max+t}function te(e,t,s,i,n=.5){const u=T(e.min,e.max,n);At(e,t,s,u,i)}function K(e,t){te(e.x,t.x,t.scaleX,t.scale,t.originX),te(e.y,t.y,t.scaleY,t.scale,t.originY)}function is(e,t){return Je(Ai(e.getBoundingClientRect(),t))}function Mi(e,t,s){const i=is(e,s),{scroll:n}=t;return n&&(G(i.x,n.offset.x),G(i.y,n.offset.y)),i}const ns=({current:e})=>e?e.ownerDocument.defaultView:null,ee=(e,t)=>Math.abs(e-t);function Bi(e,t){const s=ee(e.x,t.x),i=ee(e.y,t.y);return Math.sqrt(s**2+i**2)}class os{constructor(t,s,{transformPagePoint:i,contextWindow:n,dragSnapToOrigin:u=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=gt(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,d=Bi(h.offset,{x:0,y:0})>=3;if(!f&&!d)return;const{point:m}=h,{timestamp:x}=D;this.history.push({...m,timestamp:x});const{onStart:y,onMove:p}=this.handlers;f||(y&&y(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=mt(f,this.transformPagePoint),V.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:d,onSessionEnd:m,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=gt(h.type==="pointercancel"?this.lastMoveEventInfo:mt(f,this.transformPagePoint),this.history);this.startEvent&&d&&d(h,y),m&&m(h,y)},!Mt(t))return;this.dragSnapToOrigin=u,this.handlers=s,this.transformPagePoint=i,this.contextWindow=n||window;const o=Q(t),r=mt(o,this.transformPagePoint),{point:a}=r,{timestamp:l}=D;this.history=[{...a,timestamp:l}];const{onSessionStart:c}=s;c&&c(t,gt(r,this.history)),this.removeListeners=Oe(X(this.contextWindow,"pointermove",this.handlePointerMove),X(this.contextWindow,"pointerup",this.handlePointerUp),X(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),F(this.updatePoint)}}function mt(e,t){return t?{point:t(e.point)}:e}function se(e,t){return{x:e.x-t.x,y:e.y-t.y}}function gt({point:e},t){return{point:e,delta:se(e,rs(t)),offset:se(e,ji(t)),velocity:ki(t,.1)}}function ji(e){return e[0]}function rs(e){return e[e.length-1]}function ki(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,i=null;const n=rs(e);for(;s>=0&&(i=e[s],!(n.timestamp-i.timestamp>Os(t)));)s--;if(!i)return{x:0,y:0};const u=Us(n.timestamp-i.timestamp);if(u===0)return{x:0,y:0};const o={x:(n.x-i.x)/u,y:(n.y-i.y)/u};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Ii(e,{min:t,max:s},i){return t!==void 0&&e<t?e=i?T(t,e,i.min):Math.max(e,t):s!==void 0&&e>s&&(e=i?T(s,e,i.max):Math.min(e,s)),e}function ie(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function Fi(e,{top:t,left:s,bottom:i,right:n}){return{x:ie(e.x,s,n),y:ie(e.y,t,i)}}function ne(e,t){let s=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,i]=[i,s]),{min:s,max:i}}function Oi(e,t){return{x:ne(e.x,t.x),y:ne(e.y,t.y)}}function Ui(e,t){let s=.5;const i=A(e),n=A(t);return n>i?s=Vt(t.min,t.max-i,e.min):i>n&&(s=Vt(e.min,e.max-n,t.min)),ze(0,1,s)}function Ni(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const Dt=.35;function Gi(e=Dt){return e===!1?e=0:e===!0&&(e=Dt),{x:oe(e,"left","right"),y:oe(e,"top","bottom")}}function oe(e,t,s){return{min:re(e,t),max:re(e,s)}}function re(e,t){return typeof e=="number"?e:e[t]||0}const b={x:!1,y:!1};function as(){return b.x||b.y}function Ki(e){return e==="x"||e==="y"?b[e]?null:(b[e]=!0,()=>{b[e]=!1}):b.x||b.y?null:(b.x=b.y=!0,()=>{b.x=b.y=!1})}const Hi=new WeakMap;class Wi{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=P(),this.visualElement=t}start(t,{snapToCursor:s=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const n=c=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Q(c).point)},u=(c,h)=>{const{drag:f,dragPropagation:d,onDragStart:m}=this.getProps();if(f&&!d&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Ki(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),E(y=>{let p=this.getAxisMotionValue(y).get()||0;if(Z.test(p)){const{projection:v}=this.visualElement;if(v&&v.layout){const g=v.layout.layoutBox[y];g&&(p=A(g)*(parseFloat(p)/100))}}this.originPoint[y]=p}),m&&V.postRender(()=>m(c,h)),Nt(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(c,h)=>{const{dragPropagation:f,dragDirectionLock:d,onDirectionLock:m,onDrag:x}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:y}=h;if(d&&this.currentDirection===null){this.currentDirection=$i(y),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",h.point,y),this.updateAxis("y",h.point,y),this.visualElement.render(),x&&x(c,h)},r=(c,h)=>this.stop(c,h),a=()=>E(c=>this.getAnimationState(c)==="paused"&&this.getAxisMotionValue(c).animation?.play()),{dragSnapToOrigin:l}=this.getProps();this.panSession=new os(t,{onSessionStart:n,onStart:u,onMove:o,onSessionEnd:r,resumeAnimation:a},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,contextWindow:ns(this.visualElement)})}stop(t,s){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:n}=s;this.startAnimation(n);const{onDragEnd:u}=this.getProps();u&&V.postRender(()=>u(t,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,i){const{drag:n}=this.getProps();if(!i||!st(t,n,this.currentDirection))return;const u=this.getAxisMotionValue(t);let o=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(o=Ii(o,this.constraints[t],this.elastic[t])),u.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:s}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,n=this.constraints;t&&et(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=Fi(i.layoutBox,t):this.constraints=!1,this.elastic=Gi(s),n!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&E(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=Ni(i.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!et(t))return!1;const i=t.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const u=Mi(i,n.root,this.visualElement.getTransformPagePoint());let o=Oi(n.layout.layoutBox,u);if(s){const r=s(Si(o));this.hasMutatedConstraints=!!r,r&&(o=Je(r))}return o}startAnimation(t){const{drag:s,dragMomentum:i,dragElastic:n,dragTransition:u,dragSnapToOrigin:o,onDragTransitionEnd:r}=this.getProps(),a=this.constraints||{},l=E(c=>{if(!st(c,s,this.currentDirection))return;let h=a&&a[c]||{};o&&(h={min:0,max:0});const f=n?200:1e6,d=n?40:1e7,m={type:"inertia",velocity:i?t[c]:0,bounceStiffness:f,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...u,...h};return this.startAxisValueAnimation(c,m)});return Promise.all(l).then(r)}startAxisValueAnimation(t,s){const i=this.getAxisMotionValue(t);return Nt(this.visualElement,t),i.start(Ie(t,i,0,s,this.visualElement,!1))}stopAnimation(){E(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){E(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const s=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),n=i[s];return n||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){E(s=>{const{drag:i}=this.getProps();if(!st(s,i,this.currentDirection))return;const{projection:n}=this.visualElement,u=this.getAxisMotionValue(s);if(n&&n.layout){const{min:o,max:r}=n.layout.layoutBox[s];u.set(t[s]-T(o,r,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:i}=this.visualElement;if(!et(s)||!i||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};E(o=>{const r=this.getAxisMotionValue(o);if(r&&this.constraints!==!1){const a=r.get();n[o]=Ui({min:a,max:a},this.constraints[o])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),E(o=>{if(!st(o,t,null))return;const r=this.getAxisMotionValue(o),{min:a,max:l}=this.constraints[o];r.set(T(a,l,n[o]))})}addListeners(){if(!this.visualElement.current)return;Hi.set(this.visualElement,this);const t=this.visualElement.current,s=X(t,"pointerdown",a=>{const{drag:l,dragListener:c=!0}=this.getProps();l&&c&&this.start(a)}),i=()=>{const{dragConstraints:a}=this.getProps();et(a)&&a.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,u=n.addEventListener("measure",i);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),V.read(i);const o=J(window,"resize",()=>this.scalePositionWithinConstraints()),r=n.addEventListener("didUpdate",({delta:a,hasLayoutChanged:l})=>{this.isDragging&&l&&(E(c=>{const h=this.getAxisMotionValue(c);h&&(this.originPoint[c]+=a[c].translate,h.set(h.get()+a[c].translate))}),this.visualElement.render())});return()=>{o(),s(),u(),r&&r()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:i=!1,dragPropagation:n=!1,dragConstraints:u=!1,dragElastic:o=Dt,dragMomentum:r=!0}=t;return{...t,drag:s,dragDirectionLock:i,dragPropagation:n,dragConstraints:u,dragElastic:o,dragMomentum:r}}}function st(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function $i(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class zi extends B{constructor(t){super(t),this.removeGroupControls=H,this.removeListeners=H,this.controls=new Wi(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||H}unmount(){this.removeGroupControls(),this.removeListeners()}}const ae=e=>(t,s)=>{e&&V.postRender(()=>e(t,s))};class Xi extends B{constructor(){super(...arguments),this.removePointerDownListener=H}onPointerDown(t){this.session=new os(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ns(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:i,onPanEnd:n}=this.node.getProps();return{onSessionStart:ae(t),onStart:ae(s),onMove:i,onEnd:(u,o)=>{delete this.session,n&&V.postRender(()=>n(u,o))}}}mount(){this.removePointerDownListener=X(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const it={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function le(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const z={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Rt.test(e))e=parseFloat(e);else return e;const s=le(e,t.target.x),i=le(e,t.target.y);return`${s}% ${i}%`}},Yi={correct:(e,{treeScale:t,projectionDelta:s})=>{const i=e,n=W.parse(e);if(n.length>5)return i;const u=W.createTransformer(e),o=typeof n[0]!="number"?1:0,r=s.x.scale*t.x,a=s.y.scale*t.y;n[0+o]/=r,n[1+o]/=a;const l=T(r,a,.5);return typeof n[2+o]=="number"&&(n[2+o]/=l),typeof n[3+o]=="number"&&(n[3+o]/=l),u(n)}};class _i extends ot.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:i,layoutId:n}=this.props,{projection:u}=t;zs(qi),u&&(s.group&&s.group.add(u),i&&i.register&&n&&i.register(u),u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),it.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:i,drag:n,isPresent:u}=this.props,{projection:o}=i;return o&&(o.isPresent=u,n||t.layoutDependency!==s||s===void 0||t.isPresent!==u?o.willUpdate():this.safeToRemove(),t.isPresent!==u&&(u?o.promote():o.relegate()||V.postRender(()=>{const r=o.getStack();(!r||!r.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Xe.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:i}=this.props,{projection:n}=t;n&&(n.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(n),i&&i.deregister&&i.deregister(n))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function ls(e){const[t,s]=Hs(),i=ot.useContext(Ws);return hi.jsx(_i,{...e,layoutGroup:i,switchLayoutGroup:ot.useContext($s),isPresent:t,safeToRemove:s})}const qi={borderRadius:{...z,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:z,borderTopRightRadius:z,borderBottomLeftRadius:z,borderBottomRightRadius:z,boxShadow:Yi};function Zi(e,t,s){const i=M(e)?e:q(e);return i.start(Ie("",i,t,s)),i.animation}const Ji=(e,t)=>e.depth-t.depth;class Qi{constructor(){this.children=[],this.isDirty=!1}add(t){Ue(this.children,t),this.isDirty=!0}remove(t){Ne(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Ji),this.isDirty=!1,this.children.forEach(t)}}function tn(e,t){const s=bt.now(),i=({timestamp:n})=>{const u=n-s;u>=t&&(F(i),e(u-t))};return V.setup(i,!0),()=>F(i)}const us=["TopLeft","TopRight","BottomLeft","BottomRight"],en=us.length,ue=e=>typeof e=="string"?parseFloat(e):e,ce=e=>typeof e=="number"||Rt.test(e);function sn(e,t,s,i,n,u){n?(e.opacity=T(0,s.opacity??1,nn(i)),e.opacityExit=T(t.opacity??1,0,on(i))):u&&(e.opacity=T(t.opacity??1,s.opacity??1,i));for(let o=0;o<en;o++){const r=`border${us[o]}Radius`;let a=he(t,r),l=he(s,r);if(a===void 0&&l===void 0)continue;a||(a=0),l||(l=0),a===0||l===0||ce(a)===ce(l)?(e[r]=Math.max(T(ue(a),ue(l),i),0),(Z.test(l)||Z.test(a))&&(e[r]+="%")):e[r]=l}(t.rotate||s.rotate)&&(e.rotate=T(t.rotate||0,s.rotate||0,i))}function he(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const nn=cs(0,.5,Ns),on=cs(.5,.95,H);function cs(e,t,s){return i=>i<e?0:i>t?1:s(Vt(e,t,i))}function fe(e,t){e.min=t.min,e.max=t.max}function w(e,t){fe(e.x,t.x),fe(e.y,t.y)}function de(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function pe(e,t,s,i,n){return e-=t,e=rt(e,1/s,i),n!==void 0&&(e=rt(e,1/n,i)),e}function rn(e,t=0,s=1,i=.5,n,u=e,o=e){if(Z.test(t)&&(t=parseFloat(t),t=T(o.min,o.max,t/100)-o.min),typeof t!="number")return;let r=T(u.min,u.max,i);e===u&&(r-=t),e.min=pe(e.min,t,s,r,n),e.max=pe(e.max,t,s,r,n)}function me(e,t,[s,i,n],u,o){rn(e,t[s],t[i],t[n],t.scale,u,o)}const an=["x","scaleX","originX"],ln=["y","scaleY","originY"];function ge(e,t,s,i){me(e.x,t,an,s?s.x:void 0,i?i.x:void 0),me(e.y,t,ln,s?s.y:void 0,i?i.y:void 0)}function ye(e){return e.translate===0&&e.scale===1}function hs(e){return ye(e.x)&&ye(e.y)}function ve(e,t){return e.min===t.min&&e.max===t.max}function un(e,t){return ve(e.x,t.x)&&ve(e.y,t.y)}function xe(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function fs(e,t){return xe(e.x,t.x)&&xe(e.y,t.y)}function Pe(e){return A(e.x)/A(e.y)}function Te(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class cn{constructor(){this.members=[]}add(t){Ue(this.members,t),t.scheduleRender()}remove(t){if(Ne(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(n=>t===n);if(s===0)return!1;let i;for(let n=s;n>=0;n--){const u=this.members[n];if(u.isPresent!==!1){i=u;break}}return i?(this.promote(i),!0):!1}promote(t,s){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,s&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:n}=t.options;n===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:i}=t;s.onExitComplete&&s.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function hn(e,t,s){let i="";const n=e.x.translate/t.x,u=e.y.translate/t.y,o=s?.z||0;if((n||u||o)&&(i=`translate3d(${n}px, ${u}px, ${o}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),s){const{transformPerspective:l,rotate:c,rotateX:h,rotateY:f,skewX:d,skewY:m}=s;l&&(i=`perspective(${l}px) ${i}`),c&&(i+=`rotate(${c}deg) `),h&&(i+=`rotateX(${h}deg) `),f&&(i+=`rotateY(${f}deg) `),d&&(i+=`skewX(${d}deg) `),m&&(i+=`skewY(${m}deg) `)}const r=e.x.scale*t.x,a=e.y.scale*t.y;return(r!==1||a!==1)&&(i+=`scale(${r}, ${a})`),i||"none"}function ds(e){return Xs(e)&&"ownerSVGElement"in e}function fn(e){return ds(e)&&e.tagName==="svg"}const I={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},yt=["","X","Y","Z"],dn={visibility:"hidden"},pn=1e3;let mn=0;function vt(e,t,s,i){const{latestValues:n}=t;n[e]&&(s[e]=n[e],t.setStaticValue(e,0),i&&(i[e]=0))}function ps(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const s=js(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:n,layoutId:u}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",V,!(n||u))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&ps(i)}function ms({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:i,resetTransform:n}){return class{constructor(o={},r=t?.()){this.id=mn++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,U.value&&(I.nodes=I.calculatedTargetDeltas=I.calculatedProjections=0),this.nodes.forEach(vn),this.nodes.forEach(Sn),this.nodes.forEach(An),this.nodes.forEach(xn),U.addProjectionMetrics&&U.addProjectionMetrics(I)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0;for(let a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new Qi)}addEventListener(o,r){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Ge),this.eventHandlers.get(o).add(r)}notifyListeners(o,...r){const a=this.eventHandlers.get(o);a&&a.notify(...r)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=ds(o)&&!fn(o),this.instance=o;const{layoutId:r,layout:a,visualElement:l}=this.options;if(l&&!l.current&&l.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(a||r)&&(this.isLayoutDirty=!0),e){let c;const h=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,c&&c(),c=tn(h,250),it.hasAnimatedSinceResize&&(it.hasAnimatedSinceResize=!1,this.nodes.forEach(Se))})}r&&this.root.registerSharedNode(r,this),this.options.animate!==!1&&l&&(r||a)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:d})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||l.getDefaultTransition()||bn,{onLayoutAnimationStart:x,onLayoutAnimationComplete:y}=l.getProps(),p=!this.targetLayout||!fs(this.targetLayout,d),v=!h&&f;if(this.options.layoutRoot||this.resumeFrom||v||h&&(p||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const g={...Bs(m,"layout"),onPlay:x,onComplete:y};(l.shouldReduceMotion||this.options.layoutRoot)&&(g.delay=0,g.type=!1),this.startAnimation(g),this.setAnimationOrigin(c,v)}else h||Se(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=d})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),F(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Dn),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ps(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const h=this.path[c];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:r,layout:a}=this.options;if(r===void 0&&!a)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ve);return}this.isUpdating||this.nodes.forEach(Tn),this.isUpdating=!1,this.nodes.forEach(Vn),this.nodes.forEach(gn),this.nodes.forEach(yn),this.clearAllSnapshots();const r=bt.now();D.delta=ze(0,1e3/60,r-D.timestamp),D.timestamp=r,D.isProcessing=!0,ht.update.process(D),ht.preRender.process(D),ht.render.process(D),D.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Xe.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Pn),this.sharedNodes.forEach(wn)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,V.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){V.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!A(this.snapshot.measuredBox.x)&&!A(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let a=0;a<this.path.length;a++)this.path[a].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=P(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:r}=this.options;r&&r.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let r=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(r=!1),r&&this.instance){const a=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:a,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:a}}}resetTransform(){if(!n)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,r=this.projectionDelta&&!hs(this.projectionDelta),a=this.getTransformTemplate(),l=a?a(this.latestValues,""):void 0,c=l!==this.prevTransformTemplateValue;o&&this.instance&&(r||k(this.latestValues)||c)&&(n(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const r=this.measurePageBox();let a=this.removeElementScroll(r);return o&&(a=this.removeTransform(a)),Rn(a),{animationId:this.root.animationId,measuredBox:r,layoutBox:a,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return P();const r=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Ln))){const{scroll:l}=this.root;l&&(G(r.x,l.offset.x),G(r.y,l.offset.y))}return r}removeElementScroll(o){const r=P();if(w(r,o),this.scroll?.wasRoot)return r;for(let a=0;a<this.path.length;a++){const l=this.path[a],{scroll:c,options:h}=l;l!==this.root&&c&&h.layoutScroll&&(c.wasRoot&&w(r,o),G(r.x,c.offset.x),G(r.y,c.offset.y))}return r}applyTransform(o,r=!1){const a=P();w(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];!r&&c.options.layoutScroll&&c.scroll&&c!==c.root&&K(a,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),k(c.latestValues)&&K(a,c.latestValues)}return k(this.latestValues)&&K(a,this.latestValues),a}removeTransform(o){const r=P();w(r,o);for(let a=0;a<this.path.length;a++){const l=this.path[a];if(!l.instance||!k(l.latestValues))continue;St(l.latestValues)&&l.updateSnapshot();const c=P(),h=l.measurePageBox();w(c,h),ge(r,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,c)}return k(this.latestValues)&&ge(r,this.latestValues),r}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==D.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const r=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=r.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=r.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=r.isSharedProjectionDirty);const a=!!this.resumingFrom||this!==r;if(!(o||a&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:h}=this.options;if(!(!this.layout||!(c||h))){if(this.resolvedRelativeTargetAt=D.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=P(),this.relativeTargetOrigin=P(),_(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),w(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=P(),this.targetWithTransforms=P()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Ri(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):w(this.target,this.layout.layoutBox),ss(this.target,this.targetDelta)):w(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=P(),this.relativeTargetOrigin=P(),_(this.relativeTargetOrigin,this.target,f.target),w(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}U.value&&I.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||St(this.parent.latestValues)||es(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),r=!!this.resumingFrom||this!==o;let a=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(a=!1),r&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(a=!1),this.resolvedRelativeTargetAt===D.timestamp&&(a=!1),a)return;const{layout:l,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(l||c))return;w(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;Li(this.layoutCorrected,this.treeScale,this.path,r),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=P());const{target:d}=o;if(!d){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(de(this.prevProjectionDelta.x,this.projectionDelta.x),de(this.prevProjectionDelta.y,this.projectionDelta.y)),Y(this.projectionDelta,this.layoutCorrected,d,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!Te(this.projectionDelta.x,this.prevProjectionDelta.x)||!Te(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",d)),U.value&&I.calculatedProjections++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const r=this.getStack();r&&r.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=N(),this.projectionDelta=N(),this.projectionDeltaWithTransform=N()}setAnimationOrigin(o,r=!1){const a=this.snapshot,l=a?a.latestValues:{},c={...this.latestValues},h=N();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!r;const f=P(),d=a?a.source:void 0,m=this.layout?this.layout.source:void 0,x=d!==m,y=this.getStack(),p=!y||y.members.length<=1,v=!!(x&&!p&&this.options.crossfade===!0&&!this.path.some(Cn));this.animationProgress=0;let g;this.mixTargetDelta=O=>{const R=O/1e3;Ae(h.x,o.x,R),Ae(h.y,o.y,R),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(_(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),En(this.relativeTarget,this.relativeTargetOrigin,f,R),g&&un(this.relativeTarget,g)&&(this.isProjectionDirty=!1),g||(g=P()),w(g,this.relativeTarget)),x&&(this.animationValues=c,sn(c,l,this.latestValues,R,v,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(F(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=V.update(()=>{it.hasAnimatedSinceResize=!0,ft.layout++,this.motionValue||(this.motionValue=q(0)),this.currentAnimation=Zi(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:r=>{this.mixTargetDelta(r),o.onUpdate&&o.onUpdate(r)},onStop:()=>{ft.layout--},onComplete:()=>{ft.layout--,o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(pn),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:r,target:a,layout:l,latestValues:c}=o;if(!(!r||!a||!l)){if(this!==o&&this.layout&&l&&gs(this.options.animationType,this.layout.layoutBox,l.layoutBox)){a=this.target||P();const h=A(this.layout.layoutBox.x);a.x.min=o.target.x.min,a.x.max=a.x.min+h;const f=A(this.layout.layoutBox.y);a.y.min=o.target.y.min,a.y.max=a.y.min+f}w(r,a),K(r,c),Y(this.projectionDeltaWithTransform,this.layoutCorrected,r,c)}}registerSharedNode(o,r){this.sharedNodes.has(o)||this.sharedNodes.set(o,new cn),this.sharedNodes.get(o).add(r);const l=r.options.initialPromotionConfig;r.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(r):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:r,preserveFollowOpacity:a}={}){const l=this.getStack();l&&l.promote(this,a),o&&(this.projectionDelta=void 0,this.needsReset=!0),r&&this.setOptions({transition:r})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let r=!1;const{latestValues:a}=o;if((a.z||a.rotate||a.rotateX||a.rotateY||a.rotateZ||a.skewX||a.skewY)&&(r=!0),!r)return;const l={};a.z&&vt("z",o,l,this.animationValues);for(let c=0;c<yt.length;c++)vt(`rotate${yt[c]}`,o,l,this.animationValues),vt(`skew${yt[c]}`,o,l,this.animationValues);o.render();for(const c in l)o.setStaticValue(c,l[c]),this.animationValues&&(this.animationValues[c]=l[c]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return dn;const r={visibility:""},a=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=dt(o?.pointerEvents)||"",r.transform=a?a(this.latestValues,""):"none",r;const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){const d={};return this.options.layoutId&&(d.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,d.pointerEvents=dt(o?.pointerEvents)||""),this.hasProjected&&!k(this.latestValues)&&(d.transform=a?a({},""):"none",this.hasProjected=!1),d}const c=l.animationValues||l.latestValues;this.applyTransformsToTarget(),r.transform=hn(this.projectionDeltaWithTransform,this.treeScale,c),a&&(r.transform=a(c,r.transform));const{x:h,y:f}=this.projectionDelta;r.transformOrigin=`${h.origin*100}% ${f.origin*100}% 0`,l.animationValues?r.opacity=l===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:r.opacity=l===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const d in Kt){if(c[d]===void 0)continue;const{correct:m,applyTo:x,isCSSVariable:y}=Kt[d],p=r.transform==="none"?c[d]:m(c[d],l);if(x){const v=x.length;for(let g=0;g<v;g++)r[x[g]]=p}else y?this.options.visualElement.renderState.vars[d]=p:r[d]=p}return this.options.layoutId&&(r.pointerEvents=l===this?dt(o?.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(Ve),this.root.sharedNodes.clear()}}}function gn(e){e.updateLayout()}function yn(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=e.layout,{animationType:n}=e.options,u=t.source!==e.layout.source;n==="size"?E(c=>{const h=u?t.measuredBox[c]:t.layoutBox[c],f=A(h);h.min=s[c].min,h.max=h.min+f}):gs(n,t.layoutBox,s)&&E(c=>{const h=u?t.measuredBox[c]:t.layoutBox[c],f=A(s[c]);h.max=h.min+f,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[c].max=e.relativeTarget[c].min+f)});const o=N();Y(o,s,t.layoutBox);const r=N();u?Y(r,e.applyTransform(i,!0),t.measuredBox):Y(r,s,t.layoutBox);const a=!hs(o);let l=!1;if(!e.resumeFrom){const c=e.getClosestProjectingParent();if(c&&!c.resumeFrom){const{snapshot:h,layout:f}=c;if(h&&f){const d=P();_(d,t.layoutBox,h.layoutBox);const m=P();_(m,s,f.layoutBox),fs(d,m)||(l=!0),c.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=d,e.relativeParent=c)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:r,layoutDelta:o,hasLayoutChanged:a,hasRelativeLayoutChanged:l})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function vn(e){U.value&&I.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function xn(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Pn(e){e.clearSnapshot()}function Ve(e){e.clearMeasurements()}function Tn(e){e.isLayoutDirty=!1}function Vn(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Se(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Sn(e){e.resolveTargetDelta()}function An(e){e.calcProjection()}function Dn(e){e.resetSkewAndRotation()}function wn(e){e.removeLeadSnapshot()}function Ae(e,t,s){e.translate=T(t.translate,0,s),e.scale=T(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function De(e,t,s,i){e.min=T(t.min,s.min,i),e.max=T(t.max,s.max,i)}function En(e,t,s,i){De(e.x,t.x,s.x,i),De(e.y,t.y,s.y,i)}function Cn(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const bn={duration:.45,ease:[.4,0,.1,1]},we=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Ee=we("applewebkit/")&&!we("chrome/")?Math.round:H;function Ce(e){e.min=Ee(e.min),e.max=Ee(e.max)}function Rn(e){Ce(e.x),Ce(e.y)}function gs(e,t,s){return e==="position"||e==="preserve-aspect"&&!bi(Pe(t),Pe(s),.2)}function Ln(e){return e!==e.root&&e.scroll?.wasRoot}const Mn=ms({attachResizeListener:(e,t)=>J(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),xt={current:void 0},ys=ms({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!xt.current){const e=new Mn({});e.mount(window),e.setOptions({layoutScroll:!0}),xt.current=e}return xt.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Bn={pan:{Feature:Xi},drag:{Feature:zi,ProjectionNode:ys,MeasureLayout:ls}};function jn(e,t,s){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let i=document;t&&(i=t.current);const n=s?.[e]??i.querySelectorAll(e);return n?Array.from(n):[]}return Array.from(e)}function vs(e,t){const s=jn(e),i=new AbortController,n={passive:!0,...t,signal:i.signal};return[s,n,()=>i.abort()]}function be(e){return!(e.pointerType==="touch"||as())}function kn(e,t,s={}){const[i,n,u]=vs(e,s),o=r=>{if(!be(r))return;const{target:a}=r,l=t(a,r);if(typeof l!="function"||!a)return;const c=h=>{be(h)&&(l(h),a.removeEventListener("pointerleave",c))};a.addEventListener("pointerleave",c,n)};return i.forEach(r=>{r.addEventListener("pointerenter",o,n)}),u}function Re(e,t,s){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",s==="Start");const n="onHover"+s,u=i[n];u&&V.postRender(()=>u(t,Q(t)))}class In extends B{mount(){const{current:t}=this.node;t&&(this.unmount=kn(t,(s,i)=>(Re(this.node,i,"Start"),n=>Re(this.node,n,"End"))))}unmount(){}}class Fn extends B{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Oe(J(this.node.current,"focus",()=>this.onFocus()),J(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const xs=(e,t)=>t?e===t?!0:xs(e,t.parentElement):!1,On=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Un(e){return On.has(e.tagName)||e.tabIndex!==-1}const nt=new WeakSet;function Le(e){return t=>{t.key==="Enter"&&e(t)}}function Pt(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Nn=(e,t)=>{const s=e.currentTarget;if(!s)return;const i=Le(()=>{if(nt.has(s))return;Pt(s,"down");const n=Le(()=>{Pt(s,"up")}),u=()=>Pt(s,"cancel");s.addEventListener("keyup",n,t),s.addEventListener("blur",u,t)});s.addEventListener("keydown",i,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",i),t)};function Me(e){return Mt(e)&&!as()}function Gn(e,t,s={}){const[i,n,u]=vs(e,s),o=r=>{const a=r.currentTarget;if(!Me(r))return;nt.add(a);const l=t(a,r),c=(d,m)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),nt.has(a)&&nt.delete(a),Me(d)&&typeof l=="function"&&l(d,{success:m})},h=d=>{c(d,a===window||a===document||s.useGlobalTarget||xs(a,d.target))},f=d=>{c(d,!1)};window.addEventListener("pointerup",h,n),window.addEventListener("pointercancel",f,n)};return i.forEach(r=>{(s.useGlobalTarget?window:r).addEventListener("pointerdown",o,n),Ys(r)&&(r.addEventListener("focus",l=>Nn(l,n)),!Un(r)&&!r.hasAttribute("tabindex")&&(r.tabIndex=0))}),u}function Be(e,t,s){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap",s==="Start");const n="onTap"+(s==="End"?"":s),u=i[n];u&&V.postRender(()=>u(t,Q(t)))}class Kn extends B{mount(){const{current:t}=this.node;t&&(this.unmount=Gn(t,(s,i)=>(Be(this.node,i,"Start"),(n,{success:u})=>Be(this.node,n,u?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const wt=new WeakMap,Tt=new WeakMap,Hn=e=>{const t=wt.get(e.target);t&&t(e)},Wn=e=>{e.forEach(Hn)};function $n({root:e,...t}){const s=e||document;Tt.has(s)||Tt.set(s,{});const i=Tt.get(s),n=JSON.stringify(t);return i[n]||(i[n]=new IntersectionObserver(Wn,{root:e,...t})),i[n]}function zn(e,t,s){const i=$n(t);return wt.set(e,s),i.observe(e),()=>{wt.delete(e),i.unobserve(e)}}const Xn={some:0,all:1};class Yn extends B{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:i,amount:n="some",once:u}=t,o={root:s?s.current:void 0,rootMargin:i,threshold:typeof n=="number"?n:Xn[n]},r=a=>{const{isIntersecting:l}=a;if(this.isInView===l||(this.isInView=l,u&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:c,onViewportLeave:h}=this.node.getProps(),f=l?c:h;f&&f(a)};return zn(this.node.current,o,r)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(_n(t,s))&&this.startObserver()}unmount(){}}function _n({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const qn={inView:{Feature:Yn},tap:{Feature:Kn},focus:{Feature:Fn},hover:{Feature:In}},Zn={layout:{ProjectionNode:ys,MeasureLayout:ls}},Et={current:null},Ps={current:!1};function Jn(){if(Ps.current=!0,!!_s)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Et.current=e.matches;e.addListener(t),t()}else Et.current=!1}const Qn=new WeakMap;function to(e,t,s){for(const i in t){const n=t[i],u=s[i];if(M(n))e.addValue(i,n);else if(M(u))e.addValue(i,q(n,{owner:e}));else if(u!==n)if(e.hasValue(i)){const o=e.getValue(i);o.liveStyle===!0?o.jump(n):o.hasAnimated||o.set(n)}else{const o=e.getStaticValue(i);e.addValue(i,q(o!==void 0?o:n,{owner:e}))}}for(const i in s)t[i]===void 0&&e.removeValue(i);return t}const Ts=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Vs=e=>/^0[^.\s]+$/u.test(e),eo={test:e=>e==="auto",parse:e=>e},Ss=e=>t=>t.test(e),As=[qs,Rt,Z,Zs,Js,Qs,eo],je=e=>As.find(Ss(e)),so=[...As,C,W],io=e=>so.find(Ss(e)),no=new Set(["brightness","contrast","saturate","opacity"]);function oo(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=s.match(Gs)||[];if(!i)return e;const n=s.replace(i,"");let u=no.has(t)?1:0;return i!==s&&(u*=100),t+"("+u+n+")"}const ro=/\b([a-z-]*)\(.*?\)/gu,Ct={...W,getAnimatableNone:e=>{const t=e.match(ro);return t?t.map(oo).join(" "):e}},ao={...ti,color:C,backgroundColor:C,outlineColor:C,fill:C,stroke:C,borderColor:C,borderTopColor:C,borderRightColor:C,borderBottomColor:C,borderLeftColor:C,filter:Ct,WebkitFilter:Ct},Ds=e=>ao[e];function ws(e,t){let s=Ds(e);return s!==Ct&&(s=W),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const ke=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class lo{scrapeMotionValuesFromProps(t,s,i){return{}}constructor({parent:t,props:s,presenceContext:i,reducedMotionConfig:n,blockInitialAnimation:u,visualState:o},r={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Fe,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=bt.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,V.render(this.render,!1,!0))};const{latestValues:a,renderState:l}=o;this.latestValues=a,this.baseTarget={...a},this.initialValues=s.initial?{...a}:{},this.renderState=l,this.parent=t,this.props=s,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=n,this.options=r,this.blockInitialAnimation=!!u,this.isControllingVariants=ei(s),this.isVariantNode=si(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(s,{},this);for(const f in h){const d=h[f];a[f]!==void 0&&M(d)&&d.set(a[f],!1)}}mount(t){this.current=t,Qn.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,i)=>this.bindToMotionValue(i,s)),Ps.current||Jn(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Et.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),F(this.notifyUpdate),F(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const s=this.features[t];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(t,s){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=Lt.has(t);i&&this.onBindTransform&&this.onBindTransform();const n=s.on("change",r=>{this.latestValues[t]=r,this.props.onUpdate&&V.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),u=s.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,s)),this.valueSubscriptions.set(t,()=>{n(),u(),o&&o(),s.owner&&s.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ht){const s=Ht[t];if(!s)continue;const{isEnabled:i,Feature:n}=s;if(!this.features[t]&&n&&i(this.props)&&(this.features[t]=new n(this)),this.features[t]){const u=this.features[t];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):P()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let i=0;i<ke.length;i++){const n=ke[i];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const u="on"+n,o=t[u];o&&(this.propEventSubscriptions[n]=this.on(n,o))}this.prevMotionValues=to(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){const i=this.values.get(t);s!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,s),this.values.set(t,s),this.latestValues[t]=s.get())}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&s!==void 0&&(i=q(s===null?void 0:s,{owner:this}),this.addValue(t,i)),i}readValue(t,s){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(Ts(i)||Vs(i))?i=parseFloat(i):!io(i)&&W.test(s)&&(i=ws(t,s)),this.setBaseTarget(t,M(i)?i.get():i)),M(i)?i.get():i}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){const{initial:s}=this.props;let i;if(typeof s=="string"||typeof s=="object"){const u=ii(this.props,s,this.presenceContext?.custom);u&&(i=u[t])}if(s&&i!==void 0)return i;const n=this.getBaseTargetFromProps(this.props,t);return n!==void 0&&!M(n)?n:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new Ge),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}}const uo=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function co(e){const t=uo.exec(e);if(!t)return[,];const[,s,i,n]=t;return[`--${s??i}`,n]}function Es(e,t,s=1){const[i,n]=co(e);if(!i)return;const u=window.getComputedStyle(t).getPropertyValue(i);if(u){const o=u.trim();return Ts(o)?parseFloat(o):o}return Ye(n)?Es(n,t,s+1):n}function ho(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Vs(e):!0}const fo=new Set(["auto","none","0"]);function po(e,t,s){let i=0,n;for(;i<e.length&&!n;){const u=e[i];typeof u=="string"&&!fo.has(u)&&Ks(u).values.length&&(n=e[i]),i++}if(n&&s)for(const u of t)e[u]=ws(s,n)}class mo extends Fe{constructor(t,s,i,n,u){super(t,s,i,n,u,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:s,name:i}=this;if(!s||!s.current)return;super.readKeyframes();for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="string"&&(l=l.trim(),Ye(l))){const c=Es(l,s.current);c!==void 0&&(t[a]=c),a===t.length-1&&(this.finalKeyframe=l)}}if(this.resolveNoneKeyframes(),!ks.has(i)||t.length!==2)return;const[n,u]=t,o=je(n),r=je(u);if(o!==r)if(Gt(o)&&Gt(r))for(let a=0;a<t.length;a++){const l=t[a];typeof l=="string"&&(t[a]=parseFloat(l))}else ct[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:s}=this,i=[];for(let n=0;n<t.length;n++)(t[n]===null||ho(t[n]))&&i.push(n);i.length&&po(t,i,s)}measureInitialState(){const{element:t,unresolvedKeyframes:s,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ct[i](t.measureViewportBox(),window.getComputedStyle(t.current)),s[0]=this.measuredOrigin;const n=s[s.length-1];n!==void 0&&t.getValue(i,n).jump(n,!1)}measureEndState(){const{element:t,name:s,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const n=t.getValue(s);n&&n.jump(this.measuredOrigin,!1);const u=i.length-1,o=i[u];i[u]=ct[s](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([r,a])=>{t.getValue(r).set(a)}),this.resolveNoneKeyframes()}}class Cs extends lo{constructor(){super(...arguments),this.KeyframeResolver=mo}sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:i}){delete s[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;M(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function bs(e,{style:t,vars:s},i,n){Object.assign(e.style,t,n&&n.getProjectionStyles(i));for(const u in s)e.style.setProperty(u,s[u])}function go(e){return window.getComputedStyle(e)}class yo extends Cs{constructor(){super(...arguments),this.type="html",this.renderInstance=bs}readValueFromInstance(t,s){if(Lt.has(s))return this.projection?.isProjecting?Is(s):Fs(t,s);{const i=go(t),n=(ni(s)?i.getPropertyValue(s):i[s])||0;return typeof n=="string"?n.trim():n}}measureInstanceViewportBox(t,{transformPagePoint:s}){return is(t,s)}build(t,s,i){oi(t,s,i.transformTemplate)}scrapeMotionValuesFromProps(t,s,i){return ri(t,s,i)}}const Rs=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function vo(e,t,s,i){bs(e,t,void 0,i);for(const n in t.attrs)e.setAttribute(Rs.has(n)?n:_e(n),t.attrs[n])}class xo extends Cs{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=P}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(Lt.has(s)){const i=Ds(s);return i&&i.default||0}return s=Rs.has(s)?s:_e(s),t.getAttribute(s)}scrapeMotionValuesFromProps(t,s,i){return ai(t,s,i)}build(t,s,i){li(t,s,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,s,i,n){vo(t,s,i,n)}mount(t){this.isSVGTag=ui(t.tagName),super.mount(t)}}const Po=(e,t)=>ci(e)?new xo(t):new yo(t,{allowProjection:e!==ot.Fragment}),To={renderer:Po,...Ti,...qn},bo={...To,...Bn,...Zn};export{Es as A,co as B,as as C,mo as D,b as E,Qi as F,Ki as G,yo as H,kn as I,Gn as J,xs as K,Mt as L,As as M,je as N,ao as O,Ds as P,Ss as Q,ws as R,xo as S,io as T,lo as V,Ti as a,Bn as b,Po as c,bo as d,Jn as e,P as f,qn as g,Ps as h,ds as i,fn as j,Zi as k,Zn as l,J as m,xt as n,X as o,Et as p,Vi as q,jn as r,A as s,To as t,tn as u,Qn as v,ee as w,Bi as x,Ts as y,Vs as z};
